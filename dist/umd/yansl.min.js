!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.Yansl={},t.React)}(this,function(t,r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),u=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(n){return function(e){return function(t){return"object"===(void 0===t?"undefined":c(t))?(n.setState(t.reduce||t),t):e(t)}}};var i=function(n){return function(e){return function(t){return"function"==typeof t?t(n.provideContext()):e(t)}}};var a=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}})()&&Object.assign;function h(){}var b,v=(function(t){t.exports=function(){function t(t,e,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=h,n.PropTypes=n}()}(b={exports:{}},b.exports),b.exports),m=r.createContext(),O=function(t){function n(t){s(this,n);var e,a=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));a.dispatch=(e=a,function(t){return e.middleware(t)}),a.state=t.initialState,a.pendingState=a.state,a.getState=function(){return a.pendingState};var u=a.setState.bind(a);return a.setState=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1],i=void 0;"function"==typeof r?i=r(a.pendingState):"object"===(void 0===r?"undefined":c(r))&&null!==r&&(i=r),a.pendingState=p({},a.pendingState,i),u(r,function(){a.pendingState=a.state,o&&o()})},a.middleware=function o(i){return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=t[e],r=t[e+1]?o(i)(t,e+1):function(){};return n(i)(r)}}(a)(t.middlewares),a}return o(n,t),e(n,[{key:"provideContext",value:function(){return{dispatch:this.dispatch,state:this.state,getState:this.getState}}},{key:"render",value:function(){return r.createElement(m.Provider,{value:this.provideContext()},this.props.children)}}]),n}(r.Component);O.propTypes={children:v.node.isRequired,initialState:v.shape(),middlewares:v.arrayOf(v.func)},O.defaultProps={initialState:{},middlewares:[i,n]};var S=function(t){function a(){var t,e,n;s(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n=f(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(o)))).renderChildWithContext=function(t){return n.props.children(p({state:t.state},n.transformSelectors(t),n.transformActions(t)))},f(n,e)}return o(a,t),e(a,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount()}},{key:"transformSelectors",value:function(t){var i=t.state;return Object.entries(this.props.selectors).reduce(function(t,e){var n=l(e,2),r=n[0],o=n[1];return p({},t,u({},r,function(){return o.apply(void 0,arguments)(i)}))},{})}},{key:"transformActions",value:function(t){var i=t.dispatch;return Object.entries(this.props.actions).reduce(function(t,e){var n=l(e,2),r=n[0],o=n[1];return p({},t,u({},r,function(){return i(o.apply(void 0,arguments))}))},{})}},{key:"render",value:function(){var t=this,e="function"==typeof this.props.children;return r.createElement(m.Consumer,null,e?this.renderChildWithContext:function(){return t.props.children})}}]),a}(r.Component);S.propTypes={children:v.oneOfType([v.node,v.func]),selectors:v.shape(),actions:v.shape(),onMount:v.func,onUnmount:v.func},S.defaultProps={selectors:{},actions:{}},t.StateProvider=O,t.Container=S,t.actionMiddleware=n,t.devtoolsMiddleware=function(r){var o=window.__REDUX_DEVTOOLS_EXTENSION__.connect();return o.subscribe(function(t){if("DISPATCH"===t.type&&"JUMP_TO_STATE"===t.payload.type){var e="string"==typeof t.state?JSON.parse(t.state):t.state;r.setState(e)}}),function(n){return function(t){if("object"===(void 0===t?"undefined":c(t))){var e=p({},r.state,t.reduce(r.state));o.send(t.type,e)}return n(t)}}},t.thunkMiddleware=i,Object.defineProperty(t,"__esModule",{value:!0})});
